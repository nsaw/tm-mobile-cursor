#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check for designTokens usage outside ThemeProvider.tsx
echo "ğŸ” Checking for designTokens violations..."

# Find any designTokens usage outside ThemeProvider.tsx
DESIGN_TOKENS_VIOLATIONS=$(grep -r "designTokens" src/ --include="*.ts" --include="*.tsx" | grep -v "ThemeProvider.tsx" || true)

if [ -n "$DESIGN_TOKENS_VIOLATIONS" ]; then
    echo "âŒ designTokens usage found outside ThemeProvider.tsx:"
    echo "$DESIGN_TOKENS_VIOLATIONS"
    echo ""
    echo "ğŸš« Commit blocked: designTokens can only be used in ThemeProvider.tsx"
    echo "ğŸ’¡ Use useTheme() hook instead in components"
    exit 1
fi

# Run ESLint with theming rules
echo "ğŸ” Running ESLint theming architecture checks..."
npm run lint:check-theme

if [ $? -ne 0 ]; then
    echo "âŒ ESLint theming architecture violations found"
    echo "ğŸš« Commit blocked: Fix theming architecture violations first"
    exit 1
fi

echo "âœ… Theming architecture checks passed" 