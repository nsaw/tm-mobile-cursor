---
alwaysApply: true
title: Curl and Tail Command Safety (NB-runner required)
---

# Curl and Tail Command Safety

## CRITICAL: Ban disown/$!/inline groups; require NB-runner

All curl and tail usages must avoid inline background groups, PID capture via `$!`, and `disown`. Use NB-runner for bounded, non-blocking checks.

## Required Patterns

### Health checks (NB-runner)
```bash
node scripts/nb.cjs --ttl 18s --label expo-health --log validations/logs/expo-health.log --status validations/status -- bash -lc 'curl -sSf http://localhost:8081/status >/dev/null'
```

## Forbidden Patterns
- `( â€¦ ) &` inline background groups
- `$!` PID capture and `disown`
- `tail -f` (unbounded follow)
- `grep` pipelines for validation (use Node scanners or NB-runner bounded probes)

## Enforcement
- Use absolute paths in commands
- TTLs must be set and appropriate for the operation
- Logs must write under `validations/logs/`, status under `validations/status/`
